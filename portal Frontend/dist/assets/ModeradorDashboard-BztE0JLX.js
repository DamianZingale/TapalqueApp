import{r as c,j as e,F as s,f,g as n,n as oe,B as p,A as O,S as B,L as G,M as C,h as q,C as le,o as V}from"./bootstrap-B3hNdjPl.js";import{a as W}from"./index-Df1d2eDp.js";import"./vendor-gH-7aFTg.js";import"./router-BNmjJr4c.js";import"./utils-BSX5UMiV.js";function Y({images:y,onChange:T,maxImages:L=5,entityType:E="comercio",entityId:l}){const[k,i]=c.useState(""),[g,t]=c.useState(!1),u=Array.isArray(y)?y.map(h=>typeof h=="string"?h:h.imagenUrl):[],m=()=>{if(k.trim()&&u.length<L){const h=[...u,k.trim()];T(h),i("")}},S=async h=>{const v=h.target.files;if(!v||v.length===0||u.length>=L)return;const x=v[0];if(!x.type.match(/image\/(jpeg|jpg|png)/)){alert("Solo se permiten archivos JPEG, JPG o PNG");return}if(x.size>5*1024*1024){alert("El archivo no puede superar los 5MB");return}t(!0);try{const N=new FormData;if(N.append("imagen",x),l&&E){let b="";E==="hospedaje"?b=`/api/hospedajes/${l}/imagenes`:E==="gastronomia"?b=`/restaurante/${l}/imagenes`:(b={comercio:"/api/comercio/imagen",servicio:"/api/servicio/imagen",evento:"/api/eventos/imagen","espacio-publico":"/api/espacio-publico/imagen",terma:"/api/terma/imagen"}[E]||"/api/comercio/imagen",b=`${b}/${l}`),(E==="hospedaje"||E==="gastronomia")&&(N.delete("imagen"),N.append("file",x)),console.log("Subiendo imagen a:",b);const D=await fetch(b,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:N});if(D.ok){const o=await D.json();console.log("Imagen subida exitosamente:",o);const I=o.imagenUrl||o.url||o.message;if(I){const A=[...u,I];T(A)}else alert("La imagen se subió pero no se recibió la URL")}else{console.error("Error en respuesta del servidor:",D.status);const o=await D.json().catch(()=>({}));alert(`Error al subir imagen: ${o.message||o.error||`Error ${D.status}`}`)}}else alert("Debe guardar el registro primero antes de subir imágenes")}catch(N){console.error("Error subiendo imagen:",N),alert("Error de conexión al subir la imagen. Verifique que el backend esté disponible.")}finally{t(!1),h.target.value=""}},z=async h=>{const v=u[h];if(l&&E)try{let N="";E==="hospedaje"?N=`/api/hospedajes/${l}/imagenes`:E==="gastronomia"?N=`/restaurante/${l}/imagenes`:(N={comercio:"/api/comercio/imagen",servicio:"/api/servicio/imagen",evento:"/api/eventos/imagen","espacio-publico":"/api/espacio-publico/imagen",terma:"/api/terma/imagen"}[E]||"/api/comercio/imagen",N=`${N}/${l}`);const b=await fetch(N,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({imagenUrl:v})});b.ok||console.warn("No se pudo eliminar la imagen del servidor:",b.status)}catch(N){console.error("Error eliminando imagen del backend:",N)}const x=u.filter((N,b)=>b!==h);T(x)};return e.jsxs("div",{className:"mb-3",children:[e.jsxs(s.Label,{className:"small mb-2",children:["Imágenes (",u.length,"/",L,")"]}),u.length>0&&e.jsx(f,{className:"mb-3 g-2",children:u.map((h,v)=>e.jsx(n,{xs:6,md:4,lg:3,children:e.jsxs("div",{className:"position-relative",children:[e.jsx(oe,{src:h,alt:`Imagen ${v+1}`,fluid:!0,className:"w-100 h-100",style:{objectFit:"cover",maxHeight:"120px"},onError:x=>{console.warn("Error cargando imagen:",h),x.currentTarget.src="https://via.placeholder.com/120x120/cccccc/666666?text=Error"},onLoad:()=>{console.log("Imagen cargada exitosamente:",h)}}),e.jsx(p,{variant:"danger",size:"sm",className:"position-absolute top-0 end-0 m-1",onClick:()=>z(v),style:{fontSize:"0.7rem",padding:"0.2rem 0.4rem"},children:"×"})]})},v))}),u.length<L&&e.jsxs(f,{className:"g-2",children:[e.jsx(n,{md:6,children:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(s.Control,{size:"sm",type:"url",placeholder:"https://ejemplo.com/imagen.jpg",value:k,onChange:h=>i(h.target.value),onKeyPress:h=>h.key==="Enter"&&m()}),e.jsx(p,{size:"sm",variant:"outline-primary",onClick:m,children:"Agregar URL"})]})}),e.jsxs(n,{md:6,children:[e.jsxs("div",{className:"d-flex gap-2 align-items-center",children:[e.jsx(s.Control,{type:"file",size:"sm",accept:".jpg,.jpeg,.png",onChange:S,disabled:g}),g&&e.jsx("div",{className:"spinner-border spinner-border-sm",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Subiendo..."})})]}),e.jsx("small",{className:"text-muted",children:"JPEG, JPG, PNG (máx. 5MB)"})]})]}),u.length>=L&&e.jsxs(O,{variant:"info",className:"py-2 small",children:["Máximo de ",L," imágenes alcanzado"]})]})}const ne={getComercios:()=>W.get("/comercio/list"),getComercioById:y=>W.get(`/comercio/${y}`),createComercio:y=>W.post("/comercio",y),updateComercio:(y,T)=>W.put(`/comercio/${y}`,T),deleteComercio:y=>W.delete(`/comercio/${y}`),getAdministradores:()=>W.get("/user/administradores")},_={titulo:"",descripcion:"",direccion:"",horario:"",telefono:"",latitud:void 0,longitud:void 0,facebook:"",instagram:"",imagenes:[]};function ie(){const[y,T]=c.useState([]),[L,E]=c.useState(!0),[l,k]=c.useState(null),[i,g]=c.useState(!1),[t,u]=c.useState(_),[m,S]=c.useState(!1),[z,h]=c.useState(null),[v,x]=c.useState(!1);c.useEffect(()=>{N()},[]);const N=async()=>{try{E(!0);const a=await ne.getComercios();T(a.data),console.log("Datos cargados desde API:",a.data)}catch(a){console.error("Error cargando datos:",a),T([])}finally{E(!1)}},b=a=>{console.log("Item seleccionado:",a),k(a),g(!1),u({...a})},D=()=>{k(null),g(!0),u({..._})},o=(a,d)=>{u(j=>({...j,[a]:d}))},I=async()=>{if(!t.titulo){h({tipo:"danger",texto:"Título requerido"});return}S(!0);try{const a=localStorage.getItem("token"),d=i?"/api/comercio":`/api/comercio/patch/${l?.id}`,j=i?"POST":"PATCH",M={...t,descripcion:t.descripcion?.trim()||"",telefono:t.telefono?.trim()||void 0,facebook:t.facebook?.trim()||void 0,instagram:t.instagram?.trim()||void 0,latitud:t.latitud||void 0,longitud:t.longitud||void 0,imagenes:t.imagenes&&t.imagenes.length>0?t.imagenes:void 0};console.log("Enviando datos:",M),console.log("URL:",d),console.log("Método:",j);const U=await fetch(d,{method:j,headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(M)});if(console.log("Respuesta status:",U.status),U.ok)h({tipo:"success",texto:i?"Creado":"Actualizado"}),N(),i&&(g(!1),u(_));else{const F=await U.json().catch(()=>({}));console.error("Error del servidor:",F),h({tipo:"danger",texto:F.message||F.error||`Error ${U.status}: ${U.statusText}`})}}catch(a){console.error("Error en handleSave:",a),h({tipo:"danger",texto:"Error de conexión"})}finally{S(!1),setTimeout(()=>h(null),3e3)}},A=async()=>{if(l)try{const a=localStorage.getItem("token"),d=await fetch(`/api/comercio/${l.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}});if(d.ok)h({tipo:"success",texto:"Eliminado"}),k(null),u(_),N();else{const j=await d.json().catch(()=>({}));h({tipo:"danger",texto:j.message||j.error||"Error al eliminar"})}}catch(a){console.error("Error en handleDelete:",a),h({tipo:"danger",texto:"Error de conexión al eliminar"})}finally{x(!1),setTimeout(()=>h(null),3e3)}};return L?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(B,{size:"sm"})," Cargando..."]}):e.jsxs(f,{children:[e.jsxs(n,{md:4,children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx(p,{variant:"success",size:"sm",className:"rounded-circle me-2",onClick:D,style:{width:32,height:32},children:"+"}),e.jsx("small",{className:"text-muted",children:"Agregar nuevo"})]}),e.jsxs(G,{style:{maxHeight:400,overflowY:"auto"},children:[y.map(a=>e.jsxs(G.Item,{action:!0,active:l?.id===a.id,onClick:()=>b(a),className:"py-2",children:[e.jsx("div",{className:"fw-bold small",children:a.titulo}),e.jsx("small",{className:"text-muted",children:a.direccion})]},a.id)),y.length===0&&e.jsx(G.Item,{className:"text-muted",children:"Sin registros"})]})]}),e.jsxs(n,{md:8,children:[z&&e.jsx(O,{variant:z.tipo,className:"py-1 small",children:z.texto}),l||i?e.jsxs(s,{children:[e.jsx("h6",{children:i?"Nuevo Comercio":`Editando: ${l?.titulo}`}),!i&&l&&e.jsx(f,{className:"mb-2",children:e.jsx(n,{md:12,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small mb-0",children:"ID"}),e.jsx(s.Control,{size:"sm",value:l.id,disabled:!0})]})})}),e.jsxs(f,{children:[e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Título *"}),e.jsx(s.Control,{size:"sm",value:t.titulo||"",onChange:a=>o("titulo",a.target.value)})]})}),e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Teléfono"}),e.jsx(s.Control,{size:"sm",value:t.telefono||"",onChange:a=>o("telefono",a.target.value)})]})})]}),e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Descripción"}),e.jsx(s.Control,{size:"sm",as:"textarea",rows:2,value:t.descripcion||"",onChange:a=>o("descripcion",a.target.value)})]}),e.jsxs(f,{children:[e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Dirección"}),e.jsx(s.Control,{size:"sm",value:t.direccion||"",onChange:a=>o("direccion",a.target.value)})]})}),e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Horario"}),e.jsx(s.Control,{size:"sm",value:t.horario||"",onChange:a=>o("horario",a.target.value)})]})})]}),e.jsxs(f,{children:[e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Latitud"}),e.jsx(s.Control,{size:"sm",type:"number",step:"any",value:t.latitud??"",onChange:a=>o("latitud",parseFloat(a.target.value)||0)})]})}),e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Longitud"}),e.jsx(s.Control,{size:"sm",type:"number",step:"any",value:t.longitud??"",onChange:a=>o("longitud",parseFloat(a.target.value)||0)})]})})]}),e.jsxs(f,{children:[e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Facebook"}),e.jsx(s.Control,{size:"sm",value:t.facebook||"",onChange:a=>o("facebook",a.target.value)})]})}),e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Instagram"}),e.jsx(s.Control,{size:"sm",value:t.instagram||"",onChange:a=>o("instagram",a.target.value)})]})})]}),e.jsx(Y,{images:t.imagenes||[],onChange:a=>u(d=>({...d,imagenes:a.map(j=>({imagenUrl:j}))})),maxImages:5,entityType:"comercio",entityId:l?.id}),e.jsxs("div",{className:"d-flex gap-2 mt-3",children:[e.jsx(p,{size:"sm",variant:"primary",onClick:I,disabled:m,children:m?e.jsx(B,{size:"sm"}):i?"Crear":"Guardar"}),!i&&l&&e.jsx(p,{size:"sm",variant:"outline-danger",onClick:()=>x(!0),children:"Eliminar"}),e.jsx(p,{size:"sm",variant:"secondary",onClick:()=>{k(null),g(!1)},children:"Cancelar"})]})]}):e.jsx("p",{className:"text-muted",children:"Selecciona un item o crea uno nuevo"})]}),e.jsxs(C,{show:v,onHide:()=>x(!1),children:[e.jsx(C.Header,{closeButton:!0,children:e.jsx(C.Title,{children:"Confirmar eliminación"})}),e.jsxs(C.Body,{children:['¿Eliminar "',l?.titulo,'"?']}),e.jsxs(C.Footer,{children:[e.jsx(p,{variant:"secondary",onClick:()=>x(!1),children:"Cancelar"}),e.jsx(p,{variant:"danger",onClick:A,children:"Eliminar"})]})]})]})}const Q={titulo:"",descripcion:"",direccion:"",telefono:"",latitud:void 0,longitud:void 0,facebook:"",instagram:"",twitter:"",tiktok:"",categoria:"",horario:"",imagenes:[]};function ce(){const[y,T]=c.useState([]),[L,E]=c.useState(!0),[l,k]=c.useState(null),[i,g]=c.useState(!1),[t,u]=c.useState(Q),[m,S]=c.useState(!1),[z,h]=c.useState(null),[v,x]=c.useState(!1);c.useEffect(()=>{N()},[]);const N=async()=>{try{E(!0);const a=await fetch("/api/espacio-publico",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});a.ok&&T(await a.json())}catch(a){console.error("Error:",a)}finally{E(!1)}},b=a=>{k(a),g(!1),u({...a})},D=()=>{k(null),g(!0),u({...Q})},o=(a,d)=>{u(j=>({...j,[a]:d}))},I=async()=>{if(!t.titulo){h({tipo:"danger",texto:"Título requerido"});return}S(!0);try{const a=localStorage.getItem("token"),d=i?"/api/espacio-publico":`/api/espacio-publico/${l?.id}`,j={...t,descripcion:t.descripcion?.trim()||void 0,telefono:t.telefono?.trim()||void 0,facebook:t.facebook?.trim()||void 0,instagram:t.instagram?.trim()||void 0,twitter:t.twitter?.trim()||void 0,tiktok:t.tiktok?.trim()||void 0,categoria:t.categoria?.trim()||void 0,horario:t.horario?.trim()||void 0,latitud:t.latitud||void 0,longitud:t.longitud||void 0,imagenes:(t.imagenes?.length??0)>0?t.imagenes:void 0};(await fetch(d,{method:i?"POST":"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(j)})).ok?(h({tipo:"success",texto:i?"Creado":"Actualizado"}),N(),i&&(g(!1),u(Q))):h({tipo:"danger",texto:"Error al guardar"})}catch{h({tipo:"danger",texto:"Error de conexión"})}finally{S(!1),setTimeout(()=>h(null),3e3)}},A=async()=>{if(l)try{const a=localStorage.getItem("token");(await fetch(`/api/espacio-publico/${l.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}})).ok&&(h({tipo:"success",texto:"Eliminado"}),k(null),u(Q),N())}catch{h({tipo:"danger",texto:"Error al eliminar"})}finally{x(!1),setTimeout(()=>h(null),3e3)}};return L?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(B,{size:"sm"})," Cargando..."]}):e.jsxs(f,{children:[e.jsxs(n,{md:4,children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx(p,{variant:"success",size:"sm",className:"rounded-circle me-2",onClick:D,style:{width:32,height:32},children:"+"}),e.jsx("small",{className:"text-muted",children:"Agregar nuevo"})]}),e.jsxs(G,{style:{maxHeight:400,overflowY:"auto"},children:[y.map(a=>e.jsxs(G.Item,{action:!0,active:l?.id===a.id,onClick:()=>b(a),className:"py-2",children:[e.jsx("div",{className:"fw-bold small",children:a.titulo}),e.jsx("small",{className:"text-muted",children:a.categoria||a.direccion})]},a.id)),y.length===0&&e.jsx(G.Item,{className:"text-muted",children:"Sin registros"})]})]}),e.jsxs(n,{md:8,children:[z&&e.jsx(O,{variant:z.tipo,className:"py-1 small",children:z.texto}),l||i?e.jsxs(s,{children:[e.jsx("h6",{children:i?"Nuevo Espacio Público":`Editando: ${l?.titulo}`}),!i&&l&&e.jsx(f,{className:"mb-2",children:e.jsx(n,{md:12,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small mb-0",children:"ID"}),e.jsx(s.Control,{size:"sm",value:l.id,disabled:!0})]})})}),e.jsxs(f,{children:[e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Título *"}),e.jsx(s.Control,{size:"sm",value:t.titulo||"",onChange:a=>o("titulo",a.target.value)})]})}),e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Categoría"}),e.jsx(s.Control,{size:"sm",value:t.categoria||"",onChange:a=>o("categoria",a.target.value)})]})})]}),e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Descripción"}),e.jsx(s.Control,{size:"sm",as:"textarea",rows:2,value:t.descripcion||"",onChange:a=>o("descripcion",a.target.value)})]}),e.jsxs(f,{children:[e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Dirección"}),e.jsx(s.Control,{size:"sm",value:t.direccion||"",onChange:a=>o("direccion",a.target.value)})]})}),e.jsx(n,{md:3,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Teléfono"}),e.jsx(s.Control,{size:"sm",value:t.telefono||"",onChange:a=>o("telefono",a.target.value)})]})}),e.jsx(n,{md:3,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Horario"}),e.jsx(s.Control,{size:"sm",value:t.horario||"",onChange:a=>o("horario",a.target.value)})]})})]}),e.jsxs(f,{children:[e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Latitud"}),e.jsx(s.Control,{size:"sm",type:"number",step:"any",value:t.latitud??"",onChange:a=>o("latitud",parseFloat(a.target.value)||0)})]})}),e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Longitud"}),e.jsx(s.Control,{size:"sm",type:"number",step:"any",value:t.longitud??"",onChange:a=>o("longitud",parseFloat(a.target.value)||0)})]})})]}),e.jsxs(f,{children:[e.jsx(n,{md:3,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Facebook"}),e.jsx(s.Control,{size:"sm",value:t.facebook||"",onChange:a=>o("facebook",a.target.value)})]})}),e.jsx(n,{md:3,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Instagram"}),e.jsx(s.Control,{size:"sm",value:t.instagram||"",onChange:a=>o("instagram",a.target.value)})]})}),e.jsx(n,{md:3,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Twitter"}),e.jsx(s.Control,{size:"sm",value:t.twitter||"",onChange:a=>o("twitter",a.target.value)})]})}),e.jsx(n,{md:3,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"TikTok"}),e.jsx(s.Control,{size:"sm",value:t.tiktok||"",onChange:a=>o("tiktok",a.target.value)})]})})]}),e.jsx(Y,{images:t.imagenes||[],onChange:a=>u(d=>({...d,imagenes:a.map(j=>({imagenUrl:j}))})),maxImages:5,entityType:"espacio-publico",entityId:l?.id}),e.jsxs("div",{className:"d-flex gap-2 mt-3",children:[e.jsx(p,{size:"sm",variant:"primary",onClick:I,disabled:m,children:m?e.jsx(B,{size:"sm"}):i?"Crear":"Guardar"}),!i&&l&&e.jsx(p,{size:"sm",variant:"outline-danger",onClick:()=>x(!0),children:"Eliminar"}),e.jsx(p,{size:"sm",variant:"secondary",onClick:()=>{k(null),g(!1)},children:"Cancelar"})]})]}):e.jsx("p",{className:"text-muted",children:"Selecciona un item o crea uno nuevo"})]}),e.jsxs(C,{show:v,onHide:()=>x(!1),children:[e.jsx(C.Header,{closeButton:!0,children:e.jsx(C.Title,{children:"Confirmar"})}),e.jsxs(C.Body,{children:['¿Eliminar "',l?.titulo,'"?']}),e.jsxs(C.Footer,{children:[e.jsx(p,{variant:"secondary",onClick:()=>x(!1),children:"Cancelar"}),e.jsx(p,{variant:"danger",onClick:A,children:"Eliminar"})]})]})]})}const X={nombreEvento:"",lugar:"",horario:"",fechaInicio:"",fechaFin:"",telefonoContacto:"",nombreContacto:"",imagenes:[]};function de(){const[y,T]=c.useState([]),[L,E]=c.useState(!0),[l,k]=c.useState(null),[i,g]=c.useState(!1),[t,u]=c.useState(X),[m,S]=c.useState(!1),[z,h]=c.useState(null),[v,x]=c.useState(!1);c.useEffect(()=>{N()},[]);const N=async()=>{try{E(!0);const a=await fetch("/api/eventos",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});a.ok&&T(await a.json())}catch(a){console.error("Error:",a)}finally{E(!1)}},b=a=>{k(a),g(!1),u({...a})},D=()=>{k(null),g(!0),u({...X})},o=(a,d)=>{u(j=>({...j,[a]:d}))},I=async()=>{if(!t.nombreEvento){h({tipo:"danger",texto:"Nombre requerido"});return}S(!0);try{const a=localStorage.getItem("token"),d=i?"/api/eventos":`/api/eventos/${l?.id}`,j={...t,imagenes:(t.imagenes?.length??0)>0?t.imagenes:void 0};(await fetch(d,{method:i?"POST":"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(j)})).ok?(h({tipo:"success",texto:i?"Creado":"Actualizado"}),N(),i&&(g(!1),u(X))):h({tipo:"danger",texto:"Error al guardar"})}catch{h({tipo:"danger",texto:"Error de conexión"})}finally{S(!1),setTimeout(()=>h(null),3e3)}},A=async()=>{if(l)try{const a=localStorage.getItem("token");(await fetch(`/api/eventos/${l.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}})).ok&&(h({tipo:"success",texto:"Eliminado"}),k(null),u(X),N())}catch{h({tipo:"danger",texto:"Error al eliminar"})}finally{x(!1),setTimeout(()=>h(null),3e3)}};return L?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(B,{size:"sm"})," Cargando..."]}):e.jsxs(f,{children:[e.jsxs(n,{md:4,children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx(p,{variant:"success",size:"sm",className:"rounded-circle me-2",onClick:D,style:{width:32,height:32},children:"+"}),e.jsx("small",{className:"text-muted",children:"Agregar nuevo"})]}),e.jsxs(G,{style:{maxHeight:400,overflowY:"auto"},children:[y.map(a=>e.jsxs(G.Item,{action:!0,active:l?.id===a.id,onClick:()=>b(a),className:"py-2",children:[e.jsx("div",{className:"fw-bold small",children:a.nombreEvento}),e.jsxs("small",{className:"text-muted",children:[a.fechaInicio," - ",a.lugar]})]},a.id)),y.length===0&&e.jsx(G.Item,{className:"text-muted",children:"Sin registros"})]})]}),e.jsxs(n,{md:8,children:[z&&e.jsx(O,{variant:z.tipo,className:"py-1 small",children:z.texto}),l||i?e.jsxs(s,{children:[e.jsx("h6",{children:i?"Nuevo Evento":`Editando: ${l?.nombreEvento}`}),!i&&l&&e.jsx(f,{className:"mb-2",children:e.jsx(n,{md:12,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small mb-0",children:"ID"}),e.jsx(s.Control,{size:"sm",value:l.id,disabled:!0})]})})}),e.jsxs(f,{children:[e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Nombre *"}),e.jsx(s.Control,{size:"sm",value:t.nombreEvento||"",onChange:a=>o("nombreEvento",a.target.value)})]})}),e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Lugar *"}),e.jsx(s.Control,{size:"sm",value:t.lugar||"",onChange:a=>o("lugar",a.target.value)})]})})]}),e.jsxs(f,{children:[e.jsx(n,{md:4,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Fecha Inicio *"}),e.jsx(s.Control,{size:"sm",type:"date",value:t.fechaInicio||"",onChange:a=>o("fechaInicio",a.target.value)})]})}),e.jsx(n,{md:4,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Fecha Fin"}),e.jsx(s.Control,{size:"sm",type:"date",value:t.fechaFin||"",onChange:a=>o("fechaFin",a.target.value)})]})}),e.jsx(n,{md:4,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Horario *"}),e.jsx(s.Control,{size:"sm",value:t.horario||"",onChange:a=>o("horario",a.target.value)})]})})]}),e.jsxs(f,{children:[e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Nombre Contacto *"}),e.jsx(s.Control,{size:"sm",value:t.nombreContacto||"",onChange:a=>o("nombreContacto",a.target.value)})]})}),e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Teléfono Contacto *"}),e.jsx(s.Control,{size:"sm",value:t.telefonoContacto||"",onChange:a=>o("telefonoContacto",a.target.value)})]})})]}),e.jsx(Y,{images:t.imagenes||[],onChange:a=>u(d=>({...d,imagenes:a.map(j=>({imagenUrl:j}))})),maxImages:5,entityType:"evento",entityId:l?.id}),e.jsxs("div",{className:"d-flex gap-2 mt-3",children:[e.jsx(p,{size:"sm",variant:"primary",onClick:I,disabled:m,children:m?e.jsx(B,{size:"sm"}):i?"Crear":"Guardar"}),!i&&l&&e.jsx(p,{size:"sm",variant:"outline-danger",onClick:()=>x(!0),children:"Eliminar"}),e.jsx(p,{size:"sm",variant:"secondary",onClick:()=>{k(null),g(!1)},children:"Cancelar"})]})]}):e.jsx("p",{className:"text-muted",children:"Selecciona un item o crea uno nuevo"})]}),e.jsxs(C,{show:v,onHide:()=>x(!1),children:[e.jsx(C.Header,{closeButton:!0,children:e.jsx(C.Title,{children:"Confirmar"})}),e.jsxs(C.Body,{children:['¿Eliminar "',l?.nombreEvento,'"?']}),e.jsxs(C.Footer,{children:[e.jsx(p,{variant:"secondary",onClick:()=>x(!1),children:"Cancelar"}),e.jsx(p,{variant:"danger",onClick:A,children:"Eliminar"})]})]})]})}const Z={name:"",address:"",email:"",latitude:void 0,longitude:void 0,categories:"",phones:"",schedule:"",delivery:!1,imagenes:[],userId:void 0};function me(){const[y,T]=c.useState([]),[L,E]=c.useState([]),[l,k]=c.useState(!0),[i,g]=c.useState(null),[t,u]=c.useState(!1),[m,S]=c.useState(Z),[z,h]=c.useState(!1),[v,x]=c.useState(null),[N,b]=c.useState(!1),[D,o]=c.useState(null);c.useEffect(()=>{I(),A()},[]);const I=async()=>{try{k(!0);const r=await fetch("/api/gastronomia/restaurants",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(r.ok){const w=await r.json();T(w||[])}}catch(r){console.error("Error:",r)}finally{k(!1)}},A=async()=>{try{const r=await fetch("/api/user/administradores",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(r.ok){const w=await r.json();E(w||[])}}catch(r){console.error("Error cargando administradores:",r)}},a=async r=>{g(r),u(!1),S({...r}),await M(r.id)},d=()=>{g(null),u(!0),S({...Z}),x(null),o(null)},j=(r,w)=>{S($=>({...$,[r]:w}))},M=async r=>{try{const w=localStorage.getItem("token"),$=await fetch(`/api/business/external/${r}/type/RESTAURANT`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${w}`}});if($.ok){const R=await $.json();o(R),S(H=>({...H,userId:R.ownerId}))}else o(null)}catch(w){console.error("Error loading business:",w),o(null)}},U=async()=>{if(!m.name){x({tipo:"danger",texto:"Nombre requerido"});return}h(!0);try{const r=localStorage.getItem("token"),w=t?"/api/gastronomia":`/api/gastronomia/${i?.id}`,$={...m,address:m.address?.trim()||void 0,email:m.email?.trim()||void 0,categories:m.categories?.trim()||void 0,phones:m.phones?.trim()||void 0,schedule:m.schedule?.trim()||void 0,latitude:m.latitude||void 0,longitude:m.longitude||void 0,imagenes:(m.imagenes?.length??0)>0?m.imagenes:void 0},R=await fetch(w,{method:t?"POST":"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify($)});if(R.ok){const H=await R.json();if(t&&m.userId){const P={ownerId:m.userId,name:m.name,businessType:"RESTAURANT",externalBusinessId:H.id};(await fetch("/api/business",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(P)})).ok||console.warn("No se pudo asignar el administrador al negocio")}if(!t&&D&&m.userId&&m.userId!==D.ownerId){const P={ownerId:m.userId},J=await fetch(`/api/business/${D.id}/owner`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(P)});if(!J.ok)console.warn("No se pudo actualizar el administrador del negocio");else{const K=await J.json();o(K)}}x({tipo:"success",texto:t?"Creado":"Actualizado"}),I(),t&&(u(!1),S(Z))}else x({tipo:"danger",texto:"Error al guardar"})}catch{x({tipo:"danger",texto:"Error de conexión"})}finally{h(!1),setTimeout(()=>x(null),3e3)}},F=async()=>{if(i)try{const r=localStorage.getItem("token");(await fetch(`/api/gastronomia/delete/${i.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`}})).ok?(x({tipo:"success",texto:"Eliminado"}),g(null),S(Z),I()):x({tipo:"danger",texto:"Error al eliminar"})}catch{x({tipo:"danger",texto:"Error de conexión"})}finally{b(!1),setTimeout(()=>x(null),3e3)}};return l?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(B,{size:"sm"})," Cargando..."]}):e.jsxs(f,{children:[e.jsxs(n,{md:4,children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx(p,{variant:"success",size:"sm",className:"rounded-circle me-2",onClick:d,style:{width:32,height:32},children:"+"}),e.jsx("small",{className:"text-muted",children:"Agregar nuevo"})]}),e.jsxs(G,{style:{maxHeight:400,overflowY:"auto"},children:[y.map(r=>e.jsxs(G.Item,{action:!0,active:i?.id===r.id,onClick:()=>a(r),className:"py-2",children:[e.jsx("div",{className:"fw-bold small",children:r.name}),e.jsx("small",{className:"text-muted",children:r.address||r.categories})]},r.id)),y.length===0&&e.jsx(G.Item,{className:"text-muted",children:"Sin registros"})]})]}),e.jsxs(n,{md:8,children:[v&&e.jsx(O,{variant:v.tipo,className:"py-1 small",children:v.texto}),i||t?e.jsxs(s,{children:[e.jsx("h6",{children:t?"Nuevo Local Gastronómico":`Editando: ${i?.name}`}),!t&&i&&e.jsx(f,{className:"mb-2",children:e.jsx(n,{md:12,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small mb-0",children:"ID"}),e.jsx(s.Control,{size:"sm",value:i.id,disabled:!0})]})})}),e.jsx(f,{className:"mb-2",children:e.jsx(n,{md:12,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small mb-0",children:"Administrador/Dueño"}),e.jsxs(s.Select,{size:"sm",value:m.userId||"",onChange:r=>j("userId",parseInt(r.target.value)||0),children:[e.jsx("option",{value:"",children:"Seleccionar administrador..."}),L.map(r=>e.jsxs("option",{value:r.id,children:[r.firstName," ",r.lastName," (",r.email,")"]},r.id))]})]})})}),e.jsxs(f,{children:[e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Nombre *"}),e.jsx(s.Control,{size:"sm",value:m.name||"",onChange:r=>j("name",r.target.value)})]})}),e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Email"}),e.jsx(s.Control,{size:"sm",type:"email",value:m.email||"",onChange:r=>j("email",r.target.value)})]})})]}),e.jsxs(f,{children:[e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Dirección"}),e.jsx(s.Control,{size:"sm",value:m.address||"",onChange:r=>j("address",r.target.value)})]})}),e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Categorías"}),e.jsx(s.Control,{size:"sm",value:m.categories||"",onChange:r=>j("categories",r.target.value),placeholder:"Pizza, Empanadas"})]})})]}),e.jsxs(f,{children:[e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Teléfonos"}),e.jsx(s.Control,{size:"sm",value:m.phones||"",onChange:r=>j("phones",r.target.value),placeholder:"123456, 789012"})]})}),e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Horarios"}),e.jsx(s.Control,{size:"sm",value:m.schedule||"",onChange:r=>j("schedule",r.target.value),placeholder:"1:09:00-22:00; 2:09:00-22:00"})]})})]}),e.jsxs(f,{children:[e.jsx(n,{md:4,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Latitud"}),e.jsx(s.Control,{size:"sm",type:"number",step:"any",value:m.latitude??"",onChange:r=>j("latitude",parseFloat(r.target.value)||0)})]})}),e.jsx(n,{md:4,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Longitud"}),e.jsx(s.Control,{size:"sm",type:"number",step:"any",value:m.longitude??"",onChange:r=>j("longitude",parseFloat(r.target.value)||0)})]})}),e.jsx(n,{md:4,children:e.jsx(s.Group,{className:"mb-2 pt-4",children:e.jsx(s.Check,{type:"checkbox",label:"Delivery",checked:m.delivery||!1,onChange:r=>j("delivery",r.target.checked)})})})]}),e.jsx(Y,{images:m.imagenes||[],onChange:r=>S(w=>({...w,imagenes:r.map($=>({imagenUrl:$}))})),maxImages:5,entityType:"gastronomia",entityId:i?.id}),e.jsxs("div",{className:"d-flex gap-2 mt-3",children:[e.jsx(p,{size:"sm",variant:"primary",onClick:U,disabled:z,children:z?e.jsx(B,{size:"sm"}):t?"Crear":"Guardar"}),!t&&i&&e.jsx(p,{size:"sm",variant:"outline-danger",onClick:()=>b(!0),children:"Eliminar"}),e.jsx(p,{size:"sm",variant:"secondary",onClick:()=>{g(null),u(!1),x(null)},children:"Cancelar"})]})]}):e.jsx("p",{className:"text-muted",children:"Selecciona un item o crea uno nuevo"})]}),e.jsxs(C,{show:N,onHide:()=>b(!1),children:[e.jsx(C.Header,{closeButton:!0,children:e.jsx(C.Title,{children:"Confirmar"})}),e.jsxs(C.Body,{children:['¿Eliminar "',i?.name,'"?']}),e.jsxs(C.Footer,{children:[e.jsx(p,{variant:"secondary",onClick:()=>b(!1),children:"Cancelar"}),e.jsx(p,{variant:"danger",onClick:F,children:"Eliminar"})]})]})]})}const ee={titulo:"",description:"",ubicacion:"",googleMapsUrl:"",numWhatsapp:"",tipoHospedaje:"HOTEL",imagenes:[],userId:void 0};function he(){const[y,T]=c.useState([]),[L,E]=c.useState([]),[l,k]=c.useState(!0),[i,g]=c.useState(null),[t,u]=c.useState(!1),[m,S]=c.useState(ee),[z,h]=c.useState(!1),[v,x]=c.useState(null),[N,b]=c.useState(!1),[D,o]=c.useState(null);c.useEffect(()=>{I(),A()},[]);const I=async()=>{try{k(!0);const r=await fetch("/api/hospedajes",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(r.ok){const w=await r.json();T(w),console.log("Hospedajes cargados desde API:",w)}}catch(r){console.error("Error cargando hospedajes:",r),T([])}finally{k(!1)}},A=async()=>{try{const r=await fetch("/api/user/administradores",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(r.ok){const w=await r.json();E(w||[])}}catch(r){console.error("Error cargando administradores:",r)}},a=async r=>{console.log("Hospedaje seleccionado:",r),g(r),u(!1),S({...r}),await M(r.id)},d=()=>{g(null),u(!0),S({...ee}),o(null)},j=(r,w)=>{S($=>({...$,[r]:w}))},M=async r=>{try{const w=localStorage.getItem("token"),$=await fetch(`/api/business/external/${r}/type/HOSPEDAJE`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${w}`}});if($.ok){const R=await $.json();o(R),S(H=>({...H,userId:R.ownerId}))}else o(null)}catch(w){console.error("Error loading business:",w),o(null)}},U=async()=>{if(!m.titulo){x({tipo:"danger",texto:"Título requerido"});return}h(!0);try{const r=localStorage.getItem("token"),w=t?"/api/hospedajes":`/api/hospedajes/${i?.id}`,$=t?"POST":"PUT",R={...m,description:m.description?.trim()||"",ubicacion:m.ubicacion?.trim()||void 0,googleMapsUrl:m.googleMapsUrl?.trim()||void 0,numWhatsapp:m.numWhatsapp?.trim()||void 0,imagenes:(m.imagenes??[]).length>0?m.imagenes:void 0};console.log("Enviando hospedaje:",R),console.log("URL:",w),console.log("Método:",$);const H=await fetch(w,{method:$,headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(R)});if(console.log("Respuesta status:",H.status),H.ok){const P=await H.json();if(t&&m.userId){const J={ownerId:m.userId,name:m.titulo,businessType:"HOSPEDAJE",externalBusinessId:P.id};(await fetch("/api/business",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(J)})).ok||console.warn("No se pudo asignar el administrador al negocio")}if(!t&&D&&m.userId&&m.userId!==D.ownerId){const J={ownerId:m.userId},K=await fetch(`/api/business/${D.id}/owner`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(J)});if(!K.ok)console.warn("No se pudo actualizar el administrador del negocio");else{const re=await K.json();o(re)}}x({tipo:"success",texto:t?"Creado":"Actualizado"}),I(),t&&(u(!1),S(ee))}else{const P=await H.json().catch(()=>({}));console.error("Error del servidor:",P),x({tipo:"danger",texto:P.message||P.error||`Error ${H.status}: ${H.statusText}`})}}catch(r){console.error("Error en handleSave de hospedaje:",r),x({tipo:"danger",texto:"Error de conexión"})}finally{h(!1),setTimeout(()=>x(null),3e3)}},F=async()=>{if(i)try{const r=localStorage.getItem("token"),w=await fetch(`/api/hospedajes/${i.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`}});if(w.ok)x({tipo:"success",texto:"Eliminado"}),g(null),S(ee),I();else{const $=await w.json().catch(()=>({}));x({tipo:"danger",texto:$.message||$.error||"Error al eliminar"})}}catch(r){console.error("Error en handleDelete de hospedaje:",r),x({tipo:"danger",texto:"Error de conexión al eliminar"})}finally{b(!1),setTimeout(()=>x(null),3e3)}};return l?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(B,{size:"sm"})," Cargando..."]}):e.jsxs(f,{children:[e.jsxs(n,{md:4,children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx(p,{variant:"success",size:"sm",className:"rounded-circle me-2",onClick:d,style:{width:32,height:32},children:"+"}),e.jsx("small",{className:"text-muted",children:"Agregar nuevo"})]}),e.jsxs(G,{style:{maxHeight:400,overflowY:"auto"},children:[y.map(r=>e.jsxs(G.Item,{action:!0,active:i?.id===r.id,onClick:()=>a(r),className:"py-2",children:[e.jsx("div",{className:"fw-bold small",children:r.titulo}),e.jsxs("small",{className:"text-muted",children:[r.tipoHospedaje," - ",r.ubicacion]})]},r.id)),y.length===0&&e.jsx(G.Item,{className:"text-muted",children:"Sin registros"})]})]}),e.jsxs(n,{md:8,children:[v&&e.jsx(O,{variant:v.tipo,className:"py-1 small",children:v.texto}),i||t?e.jsxs(s,{children:[e.jsx("h6",{children:t?"Nuevo Hospedaje":`Editando: ${i?.titulo}`}),!t&&i&&e.jsx(f,{className:"mb-2",children:e.jsx(n,{md:12,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small mb-0",children:"ID"}),e.jsx(s.Control,{size:"sm",value:i.id,disabled:!0})]})})}),e.jsx(f,{className:"mb-2",children:e.jsx(n,{md:12,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small mb-0",children:"Administrador/Dueño"}),e.jsxs(s.Select,{size:"sm",value:m.userId||"",onChange:r=>j("userId",r.target.value),children:[e.jsx("option",{value:"",children:"Seleccionar administrador..."}),L.map(r=>e.jsxs("option",{value:r.id,children:[r.firstName," ",r.lastName," (",r.email,")"]},r.id))]})]})})}),e.jsxs(f,{children:[e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Título *"}),e.jsx(s.Control,{size:"sm",value:m.titulo||"",onChange:r=>j("titulo",r.target.value)})]})}),e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Tipo *"}),e.jsxs(s.Select,{size:"sm",value:m.tipoHospedaje||"HOTEL",onChange:r=>j("tipoHospedaje",r.target.value),children:[e.jsx("option",{value:"HOTEL",children:"Hotel"}),e.jsx("option",{value:"DEPARTAMENTO",children:"Departamento"}),e.jsx("option",{value:"CABAÑA",children:"Cabaña"}),e.jsx("option",{value:"CASA",children:"Casa"}),e.jsx("option",{value:"OTRO",children:"Otro"})]})]})})]}),e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Descripción"}),e.jsx(s.Control,{size:"sm",as:"textarea",rows:2,value:m.description||"",onChange:r=>j("description",r.target.value)})]}),e.jsxs(f,{children:[e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Ubicación *"}),e.jsx(s.Control,{size:"sm",value:m.ubicacion||"",onChange:r=>j("ubicacion",r.target.value)})]})}),e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"WhatsApp"}),e.jsx(s.Control,{size:"sm",value:m.numWhatsapp||"",onChange:r=>j("numWhatsapp",r.target.value)})]})})]}),e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Google Maps URL *"}),e.jsx(s.Control,{size:"sm",value:m.googleMapsUrl||"",onChange:r=>j("googleMapsUrl",r.target.value),placeholder:"https://maps.google.com/..."})]}),e.jsx(Y,{images:m.imagenes||[],onChange:r=>S(w=>({...w,imagenes:r.map($=>({imagenUrl:$}))})),maxImages:5,entityType:"hospedaje",entityId:i?.id}),e.jsxs("div",{className:"d-flex gap-2 mt-3",children:[e.jsx(p,{size:"sm",variant:"primary",onClick:U,disabled:z,children:z?e.jsx(B,{size:"sm"}):t?"Crear":"Guardar"}),!t&&i&&e.jsx(p,{size:"sm",variant:"outline-danger",onClick:()=>b(!0),children:"Eliminar"}),e.jsx(p,{size:"sm",variant:"secondary",onClick:()=>{g(null),u(!1)},children:"Cancelar"})]})]}):e.jsx("p",{className:"text-muted",children:"Selecciona un item o crea uno nuevo"})]}),e.jsxs(C,{show:N,onHide:()=>b(!1),children:[e.jsx(C.Header,{closeButton:!0,children:e.jsx(C.Title,{children:"Confirmar"})}),e.jsxs(C.Body,{children:['¿Eliminar "',i?.titulo,'"?']}),e.jsxs(C.Footer,{children:[e.jsx(p,{variant:"secondary",onClick:()=>b(!1),children:"Cancelar"}),e.jsx(p,{variant:"danger",onClick:F,children:"Eliminar"})]})]})]})}const se={titulo:"",descripcion:"",direccion:"",horario:"",telefono:"",latitud:void 0,longitud:void 0,facebook:"",instagram:"",imagenes:[]};function ue(){const[y,T]=c.useState([]),[L,E]=c.useState(!0),[l,k]=c.useState(null),[i,g]=c.useState(!1),[t,u]=c.useState(se),[m,S]=c.useState(!1),[z,h]=c.useState(null),[v,x]=c.useState(!1);c.useEffect(()=>{N()},[]);const N=async()=>{try{E(!0);const a=await fetch("/api/servicio",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});a.ok&&T(await a.json())}catch(a){console.error("Error:",a)}finally{E(!1)}},b=a=>{k(a),g(!1),u({...a})},D=()=>{k(null),g(!0),u({...se})},o=(a,d)=>{u(j=>({...j,[a]:d}))},I=async()=>{if(!t.titulo){h({tipo:"danger",texto:"Título requerido"});return}S(!0);try{const a=localStorage.getItem("token"),d=i?"/api/servicio":`/api/servicio/${l?.id}`,j={...t,descripcion:t.descripcion?.trim()||void 0,telefono:t.telefono?.trim()||void 0,facebook:t.facebook?.trim()||void 0,instagram:t.instagram?.trim()||void 0,latitud:t.latitud||void 0,longitud:t.longitud||void 0,imagenes:(t.imagenes?.length??0)>0?t.imagenes:void 0};(await fetch(d,{method:i?"POST":"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(j)})).ok?(h({tipo:"success",texto:i?"Creado":"Actualizado"}),N(),i&&(g(!1),u(se))):h({tipo:"danger",texto:"Error al guardar"})}catch{h({tipo:"danger",texto:"Error de conexión"})}finally{S(!1),setTimeout(()=>h(null),3e3)}},A=async()=>{if(l)try{const a=localStorage.getItem("token");(await fetch(`/api/servicio/${l.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}})).ok&&(h({tipo:"success",texto:"Eliminado"}),k(null),u(se),N())}catch{h({tipo:"danger",texto:"Error al eliminar"})}finally{x(!1),setTimeout(()=>h(null),3e3)}};return L?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(B,{size:"sm"})," Cargando..."]}):e.jsxs(f,{children:[e.jsxs(n,{md:4,children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx(p,{variant:"success",size:"sm",className:"rounded-circle me-2",onClick:D,style:{width:32,height:32},children:"+"}),e.jsx("small",{className:"text-muted",children:"Agregar nuevo"})]}),e.jsxs(G,{style:{maxHeight:400,overflowY:"auto"},children:[y.map(a=>e.jsxs(G.Item,{action:!0,active:l?.id===a.id,onClick:()=>b(a),className:"py-2",children:[e.jsx("div",{className:"fw-bold small",children:a.titulo}),e.jsx("small",{className:"text-muted",children:a.direccion})]},a.id)),y.length===0&&e.jsx(G.Item,{className:"text-muted",children:"Sin registros"})]})]}),e.jsxs(n,{md:8,children:[z&&e.jsx(O,{variant:z.tipo,className:"py-1 small",children:z.texto}),l||i?e.jsxs(s,{children:[e.jsx("h6",{children:i?"Nuevo Servicio":`Editando: ${l?.titulo}`}),!i&&l&&e.jsx(f,{className:"mb-2",children:e.jsx(n,{md:12,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small mb-0",children:"ID"}),e.jsx(s.Control,{size:"sm",value:l.id,disabled:!0})]})})}),e.jsxs(f,{children:[e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Título *"}),e.jsx(s.Control,{size:"sm",value:t.titulo||"",onChange:a=>o("titulo",a.target.value)})]})}),e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Teléfono"}),e.jsx(s.Control,{size:"sm",value:t.telefono||"",onChange:a=>o("telefono",a.target.value)})]})})]}),e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Descripción"}),e.jsx(s.Control,{size:"sm",as:"textarea",rows:2,value:t.descripcion||"",onChange:a=>o("descripcion",a.target.value)})]}),e.jsxs(f,{children:[e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Dirección"}),e.jsx(s.Control,{size:"sm",value:t.direccion||"",onChange:a=>o("direccion",a.target.value)})]})}),e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Horario"}),e.jsx(s.Control,{size:"sm",value:t.horario||"",onChange:a=>o("horario",a.target.value)})]})})]}),e.jsxs(f,{children:[e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Latitud"}),e.jsx(s.Control,{size:"sm",type:"number",step:"any",value:t.latitud??"",onChange:a=>o("latitud",parseFloat(a.target.value)||0)})]})}),e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Longitud"}),e.jsx(s.Control,{size:"sm",type:"number",step:"any",value:t.longitud??"",onChange:a=>o("longitud",parseFloat(a.target.value)||0)})]})})]}),e.jsxs(f,{children:[e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Facebook"}),e.jsx(s.Control,{size:"sm",value:t.facebook||"",onChange:a=>o("facebook",a.target.value)})]})}),e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Instagram"}),e.jsx(s.Control,{size:"sm",value:t.instagram||"",onChange:a=>o("instagram",a.target.value)})]})})]}),e.jsx(Y,{images:t.imagenes||[],onChange:a=>u(d=>({...d,imagenes:a.map(j=>({imagenUrl:j}))})),maxImages:5,entityType:"servicio",entityId:l?.id}),e.jsxs("div",{className:"d-flex gap-2 mt-3",children:[e.jsx(p,{size:"sm",variant:"primary",onClick:I,disabled:m,children:m?e.jsx(B,{size:"sm"}):i?"Crear":"Guardar"}),!i&&l&&e.jsx(p,{size:"sm",variant:"outline-danger",onClick:()=>x(!0),children:"Eliminar"}),e.jsx(p,{size:"sm",variant:"secondary",onClick:()=>{k(null),g(!1)},children:"Cancelar"})]})]}):e.jsx("p",{className:"text-muted",children:"Selecciona un item o crea uno nuevo"})]}),e.jsxs(C,{show:v,onHide:()=>x(!1),children:[e.jsx(C.Header,{closeButton:!0,children:e.jsx(C.Title,{children:"Confirmar"})}),e.jsxs(C.Body,{children:['¿Eliminar "',l?.titulo,'"?']}),e.jsxs(C.Footer,{children:[e.jsx(p,{variant:"secondary",onClick:()=>x(!1),children:"Cancelar"}),e.jsx(p,{variant:"danger",onClick:A,children:"Eliminar"})]})]})]})}const ae={titulo:"",description:"",direccion:"",horario:"",telefono:"",latitud:void 0,longitud:void 0,facebook:"",instagram:"",imagenes:[]};function xe(){const[y,T]=c.useState([]),[L,E]=c.useState(!0),[l,k]=c.useState(null),[i,g]=c.useState(!1),[t,u]=c.useState(ae),[m,S]=c.useState(!1),[z,h]=c.useState(null);c.useEffect(()=>{v()},[]);const v=async()=>{try{E(!0);const o=await fetch("/api/terma",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(o.ok){const I=await o.json();console.log("Termas cargadas:",I),T(I||[])}else console.error("Error al cargar termas:",o.status,o.statusText),T([])}catch(o){console.error("Error:",o),T([])}finally{E(!1)}},x=o=>{k(o),g(!1),u({...o})},N=()=>{k(null),g(!0),u({...ae})},b=(o,I)=>{u(A=>({...A,[o]:I}))},D=async()=>{if(!t.titulo){h({tipo:"danger",texto:"Título requerido"});return}S(!0);try{const o=localStorage.getItem("token"),I=i?"/api/terma":`/api/terma/${l?.id}`,A={...t,description:t.description?.trim()||void 0,direccion:t.direccion?.trim()||void 0,horario:t.horario?.trim()||void 0,telefono:t.telefono?.trim()||void 0,facebook:t.facebook?.trim()||void 0,instagram:t.instagram?.trim()||void 0,latitud:t.latitud||void 0,longitud:t.longitud||void 0,imagenes:(t.imagenes?.length??0)>0?t.imagenes:void 0},a=await fetch(I,{method:i?"POST":"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(A)});if(a.ok)h({tipo:"success",texto:i?"Creado":"Actualizado"}),v(),i&&(g(!1),u(ae));else{const d=await a.json().catch(()=>({}));console.error("Error del servidor:",d),h({tipo:"danger",texto:d.message||d.error||`Error ${a.status}: ${a.statusText}`})}}catch(o){console.error("Error en handleSave:",o),h({tipo:"danger",texto:"Error de conexión"})}finally{S(!1),setTimeout(()=>h(null),3e3)}};return L?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(B,{size:"sm"})," Cargando..."]}):e.jsxs(f,{children:[e.jsxs(n,{md:4,children:[e.jsxs("div",{className:"d-flex align-items-center mb-2",children:[e.jsx(p,{variant:"success",size:"sm",className:"rounded-circle me-2",onClick:N,style:{width:32,height:32},children:"+"}),e.jsx("small",{className:"text-muted",children:"Crear primera terma"})]}),e.jsxs(G,{style:{maxHeight:400,overflowY:"auto"},children:[y.map(o=>e.jsxs(G.Item,{action:!0,active:l?.id===o.id,onClick:()=>x(o),className:"py-2",children:[e.jsx("div",{className:"fw-bold small",children:o.titulo}),e.jsx("small",{className:"text-muted",children:o.direccion})]},o.id)),y.length===0&&e.jsx(G.Item,{className:"text-muted",children:"Sin registros - crea la primera"})]})]}),e.jsxs(n,{md:8,children:[z&&e.jsx(O,{variant:z.tipo,className:"py-1 small",children:z.texto}),l||i?e.jsxs(s,{children:[e.jsx("h6",{children:i?"Nueva Terma":`Editando: ${l?.titulo}`}),!i&&l&&e.jsx(f,{className:"mb-2",children:e.jsx(n,{md:12,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small mb-0",children:"ID"}),e.jsx(s.Control,{size:"sm",value:l.id,disabled:!0})]})})}),e.jsxs(f,{children:[e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Título *"}),e.jsx(s.Control,{size:"sm",value:t.titulo||"",onChange:o=>b("titulo",o.target.value)})]})}),e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Teléfono"}),e.jsx(s.Control,{size:"sm",value:t.telefono||"",onChange:o=>b("telefono",o.target.value)})]})})]}),e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Descripción"}),e.jsx(s.Control,{size:"sm",as:"textarea",rows:2,value:t.description||"",onChange:o=>b("description",o.target.value)})]}),e.jsxs(f,{children:[e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Dirección"}),e.jsx(s.Control,{size:"sm",value:t.direccion||"",onChange:o=>b("direccion",o.target.value)})]})}),e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Horario"}),e.jsx(s.Control,{size:"sm",value:t.horario||"",onChange:o=>b("horario",o.target.value)})]})})]}),e.jsxs(f,{children:[e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Latitud"}),e.jsx(s.Control,{size:"sm",type:"number",step:"any",value:t.latitud??"",onChange:o=>b("latitud",parseFloat(o.target.value)||0)})]})}),e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Longitud"}),e.jsx(s.Control,{size:"sm",type:"number",step:"any",value:t.longitud??"",onChange:o=>b("longitud",parseFloat(o.target.value)||0)})]})})]}),e.jsxs(f,{children:[e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Facebook"}),e.jsx(s.Control,{size:"sm",value:t.facebook||"",onChange:o=>b("facebook",o.target.value)})]})}),e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Instagram"}),e.jsx(s.Control,{size:"sm",value:t.instagram||"",onChange:o=>b("instagram",o.target.value)})]})})]}),e.jsx(Y,{images:t.imagenes||[],onChange:o=>u(I=>({...I,imagenes:o.map(A=>({imagenUrl:A}))})),maxImages:5,entityType:"terma",entityId:l?.id}),l?.imagenes&&l.imagenes.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-1",children:"Imágenes"}),e.jsx("div",{className:"d-flex gap-1 flex-wrap",children:l.imagenes.map((o,I)=>e.jsx("img",{src:o.imagenUrl,alt:"",style:{width:60,height:60,objectFit:"cover"}},I))})]}),e.jsxs("div",{className:"d-flex gap-2 mt-3",children:[e.jsx(p,{size:"sm",variant:"primary",onClick:D,disabled:m,children:m?e.jsx(B,{size:"sm"}):i?"Crear":"Guardar"}),e.jsx(p,{size:"sm",variant:"secondary",onClick:()=>{k(null),g(!1)},children:"Cancelar"})]})]}):e.jsx("p",{className:"text-muted",children:"Selecciona la terma para editar o crea una nueva"})]})]})}const te={firstName:"",lastName:"",email:"",password:"",role:"USER"};function je(){const[y,T]=c.useState([]),[L,E]=c.useState(!0),[l,k]=c.useState(null),[i,g]=c.useState(null),[t,u]=c.useState(!1),[m,S]=c.useState(!1),[z,h]=c.useState(""),[v,x]=c.useState(te),[N,b]=c.useState(!1);c.useEffect(()=>{D()},[]);const D=async()=>{try{E(!0);const d=await fetch("/api/user/all",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(d.ok){const j=await d.json();T(j)}else console.warn("API respondió con error:",d.status),T([])}catch(d){console.error("Error cargando usuarios:",d),T([])}finally{E(!1)}},o=d=>{k(d)},I=async()=>{if(!(!l||!z)){b(!0);try{const d=localStorage.getItem("token"),j=await fetch(`/api/user/${l.id}/role`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({role:z})});if(j.ok)g({tipo:"success",texto:"Rol actualizado"}),D(),u(!1);else{const M=await j.json().catch(()=>({}));g({tipo:"danger",texto:M.error||M.detalle||"Error al cambiar rol"})}}catch(d){console.error("Error:",d),g({tipo:"danger",texto:"Error de conexión"})}finally{b(!1),setTimeout(()=>g(null),3e3)}}},A=async()=>{if(!v.firstName||!v.email||!v.password){g({tipo:"danger",texto:"Nombre, email y contraseña son requeridos"});return}b(!0);try{const d=localStorage.getItem("token"),j={correo:v.email,nombre:v.firstName,contrasenia:v.password,role:v.role},M=await fetch("/api/user/moderador/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify(j)});if(M.ok)g({tipo:"success",texto:"Usuario creado correctamente"}),S(!1),x(te),D();else{const U=await M.json().catch(()=>({}));g({tipo:"danger",texto:U.error||U.detalle||"Error al crear usuario"})}}catch(d){console.error("Error:",d),g({tipo:"danger",texto:"Error de conexión"})}finally{b(!1),setTimeout(()=>g(null),3e3)}},a=d=>{switch(d){case"MODERADOR":return e.jsx(q,{bg:"danger",children:"Moderador"});case"ADMINISTRADOR":return e.jsx(q,{bg:"warning",text:"dark",children:"Administrador"});case"USER":return e.jsx(q,{bg:"secondary",children:"Usuario"});default:return e.jsx(q,{bg:"light",text:"dark",children:d})}};return L?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(B,{size:"sm"})," Cargando..."]}):e.jsxs(f,{children:[e.jsxs(n,{md:4,children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsxs("small",{className:"text-muted",children:[y.length," usuario(s)"]}),e.jsx(p,{variant:"success",size:"sm",onClick:()=>S(!0),children:"+ Nuevo"})]}),e.jsxs(G,{style:{maxHeight:400,overflowY:"auto"},children:[y.map(d=>e.jsx(G.Item,{action:!0,active:l?.id===d.id,onClick:()=>o(d),className:"py-2",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"fw-bold small",children:[d.firstName," ",d.lastName]}),e.jsx("small",{className:"text-muted",children:d.email})]}),a(d.role)]})},d.id)),y.length===0&&e.jsx(G.Item,{className:"text-muted",children:"Sin usuarios registrados"})]})]}),e.jsxs(n,{md:8,children:[i&&e.jsx(O,{variant:i.tipo,className:"py-1 small",children:i.texto}),l?e.jsxs("div",{children:[e.jsx("h6",{children:"Detalles del Usuario"}),e.jsx("table",{className:"table table-sm",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{className:"text-muted",style:{width:"30%"},children:"Nombre"}),e.jsxs("td",{children:[l.firstName," ",l.lastName]})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"text-muted",children:"Email"}),e.jsxs("td",{children:[l.email,l.emailVerified?e.jsx(q,{bg:"success",className:"ms-2",children:"Verificado"}):e.jsx(q,{bg:"warning",text:"dark",className:"ms-2",children:"No verificado"})]})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"text-muted",children:"Rol"}),e.jsx("td",{children:a(l.role)})]}),l.address&&e.jsxs("tr",{children:[e.jsx("th",{className:"text-muted",children:"Dirección"}),e.jsx("td",{children:l.address})]})]})}),e.jsx(p,{size:"sm",variant:"outline-primary",onClick:()=>{h(l.role),u(!0)},children:"Cambiar Rol"})]}):e.jsx("p",{className:"text-muted",children:"Selecciona un usuario para ver detalles"})]}),e.jsxs(C,{show:t,onHide:()=>u(!1),children:[e.jsx(C.Header,{closeButton:!0,children:e.jsx(C.Title,{children:"Cambiar Rol"})}),e.jsxs(C.Body,{children:[e.jsxs("p",{children:["Cambiar rol de ",e.jsxs("strong",{children:[l?.firstName," ",l?.lastName]})]}),e.jsxs(s.Select,{value:z,onChange:d=>h(d.target.value),children:[e.jsx("option",{value:"USER",children:"Usuario"}),e.jsx("option",{value:"ADMINISTRADOR",children:"Administrador"}),e.jsx("option",{value:"MODERADOR",children:"Moderador"})]}),e.jsxs("small",{className:"text-muted mt-2 d-block",children:[e.jsx("strong",{children:"Usuario:"})," Acceso básico.",e.jsx("br",{}),e.jsx("strong",{children:"Administrador:"})," Gestiona comercios/negocios asignados.",e.jsx("br",{}),e.jsx("strong",{children:"Moderador:"})," Acceso total al panel de moderación."]})]}),e.jsxs(C.Footer,{children:[e.jsx(p,{variant:"secondary",onClick:()=>u(!1),children:"Cancelar"}),e.jsx(p,{variant:"primary",onClick:I,disabled:N,children:N?e.jsx(B,{size:"sm"}):"Guardar"})]})]}),e.jsxs(C,{show:m,onHide:()=>S(!1),children:[e.jsx(C.Header,{closeButton:!0,children:e.jsx(C.Title,{children:"Crear Usuario"})}),e.jsx(C.Body,{children:e.jsxs(s,{children:[e.jsxs(f,{children:[e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Nombre *"}),e.jsx(s.Control,{size:"sm",value:v.firstName,onChange:d=>x({...v,firstName:d.target.value})})]})}),e.jsx(n,{md:6,children:e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Apellido"}),e.jsx(s.Control,{size:"sm",value:v.lastName,onChange:d=>x({...v,lastName:d.target.value})})]})})]}),e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Email *"}),e.jsx(s.Control,{size:"sm",type:"email",value:v.email,onChange:d=>x({...v,email:d.target.value})})]}),e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Contraseña *"}),e.jsx(s.Control,{size:"sm",type:"password",value:v.password,onChange:d=>x({...v,password:d.target.value})})]}),e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{className:"small mb-0",children:"Rol"}),e.jsxs(s.Select,{size:"sm",value:v.role,onChange:d=>x({...v,role:d.target.value}),children:[e.jsx("option",{value:"USER",children:"Usuario"}),e.jsx("option",{value:"ADMINISTRADOR",children:"Administrador"}),e.jsx("option",{value:"MODERADOR",children:"Moderador"})]})]})]})}),e.jsxs(C.Footer,{children:[e.jsx(p,{variant:"secondary",onClick:()=>S(!1),children:"Cancelar"}),e.jsx(p,{variant:"primary",onClick:A,disabled:N,children:N?e.jsx(B,{size:"sm"}):"Crear"})]})]})]})}const ge=[{key:"usuarios",titulo:"Usuarios",componente:e.jsx(je,{})},{key:"comercios",titulo:"Comercios",componente:e.jsx(ie,{})},{key:"servicios",titulo:"Servicios",componente:e.jsx(ue,{})},{key:"eventos",titulo:"Eventos",componente:e.jsx(de,{})},{key:"espacios",titulo:"Espacios Públicos",componente:e.jsx(ce,{})},{key:"hospedajes",titulo:"Hospedajes",componente:e.jsx(he,{})},{key:"gastronomia",titulo:"Gastronomía",componente:e.jsx(me,{})},{key:"termas",titulo:"Termas",componente:e.jsx(xe,{})}];function Ce(){const[y,T]=c.useState("usuarios");return e.jsxs(le,{fluid:!0,className:"py-3",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"mb-1",children:"Panel de Moderador"}),e.jsx(q,{bg:"secondary",children:"Gestión de contenido público"})]}),e.jsx(V,{activeKey:y,onSelect:L=>T(L),children:ge.map(L=>e.jsxs(V.Item,{eventKey:L.key,children:[e.jsx(V.Header,{children:L.titulo}),e.jsx(V.Body,{children:L.componente})]},L.key))})]})}export{Ce as default};
